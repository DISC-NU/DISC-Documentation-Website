"use strict";(self.webpackChunkdisc_documentation=self.webpackChunkdisc_documentation||[]).push([[2494],{3187:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"backend/development","title":"Development Guide","description":"Learn how to develop, test, and deploy the backend service for the DISCover Program template.","source":"@site/docs/discover-program-template-project/backend/development.md","sourceDirName":"backend","slug":"/backend/development","permalink":"/discover-program-template-project/backend/development","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"development","title":"Development Guide","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Project Structure","permalink":"/discover-program-template-project/backend/project-structure"},"next":{"title":"Deployment","permalink":"/discover-program-template-project/backend/deployment"}}');var i=r(4848),l=r(8453);const t={id:"development",title:"Development Guide",sidebar_position:4},a="Backend Development Guide",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Project Setup",id:"project-setup",level:2},{value:"Environment Variables",id:"environment-variables",level:3},{value:"Authentication Flow",id:"authentication-flow",level:3},{value:"Session Management",id:"session-management",level:3},{value:"Development Process",id:"development-process",level:2},{value:"Git Workflow",id:"git-workflow",level:3},{value:"Code Quality",id:"code-quality",level:3},{value:"Running Locally",id:"running-locally",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Common Issues",id:"common-issues",level:3},{value:"Deployment",id:"deployment",level:2},{value:"Resources",id:"resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"backend-development-guide",children:"Backend Development Guide"})}),"\n",(0,i.jsx)(n.p,{children:"Learn how to develop, test, and deploy the backend service for the DISCover Program template."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"The backend service is built with:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Express.js for the web server"}),"\n",(0,i.jsx)(n.li,{children:"Supabase for database and authentication"}),"\n",(0,i.jsx)(n.li,{children:"Cookie-based session management"}),"\n",(0,i.jsx)(n.li,{children:"CORS protection for secure client communication"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"project-setup",children:"Project Setup"}),"\n",(0,i.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,i.jsxs)(n.p,{children:["Create a ",(0,i.jsx)(n.code,{children:".env"})," file with the following variables:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"FRONTEND_URL=your_DEPLOYED_frontend_url_on_vercel\nFRONTEND_URL_DEV=localhost:3001\nSUPABASE_URL=your_supabase_url\nSUPABASE_ANON_KEY=your_supabase_key\nPORT=3000\nAPI_URL=http://localhost:5050\nNODE_ENV=development\n"})}),"\n",(0,i.jsx)(n.h3,{id:"authentication-flow",children:"Authentication Flow"}),"\n",(0,i.jsx)(n.p,{children:"The backend handles these auth routes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"POST / auth / signup; // Create new user account\nPOST / auth / login; // Log in existing user\nPOST / auth / logout; // Log out user\nGET / auth / verify; // Verify email after signup\nGET / auth / me; // Get current user details\nGET / auth / users; // Get all users (protected route)\nGET / auth / google; // Initiate Google OAuth\nGET / auth / callback; // Handle OAuth callback\nPOST / auth / callback; // Process OAuth tokens\n"})}),"\n",(0,i.jsx)(n.h3,{id:"session-management",children:"Session Management"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Sessions are managed using HTTP-only cookies"}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"authMiddleware"})," validates sessions by:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Checking for authorization header or cookie"}),"\n",(0,i.jsx)(n.li,{children:"Validating token with Supabase"}),"\n",(0,i.jsx)(n.li,{children:"Attaching user data to request"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"development-process",children:"Development Process"}),"\n",(0,i.jsx)(n.h3,{id:"git-workflow",children:"Git Workflow"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Create feature branch from main:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git checkout -b feature/your-feature\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Make changes and commit:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'git add .\ngit commit -m "feat: description of changes"\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Push and create PR:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git push origin feature/your-feature\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"Request review from CODEOWNERS"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"code-quality",children:"Code Quality"}),"\n",(0,i.jsx)(n.p,{children:"The repository enforces:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Linting with ESLint"}),"\n",(0,i.jsx)(n.li,{children:"Formatting with Prettier"}),"\n",(0,i.jsx)(n.li,{children:"GitHub Actions for CI/CD"}),"\n",(0,i.jsx)(n.li,{children:"Protected main branch"}),"\n",(0,i.jsx)(n.li,{children:"Required PR reviews"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"running-locally",children:"Running Locally"}),"\n",(0,i.jsx)(n.p,{children:"Start development server:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run dev\n"})}),"\n",(0,i.jsx)(n.p,{children:"Run tests:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm test\n"})}),"\n",(0,i.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsx)(n.p,{children:"Use consistent error responses:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'// 400 Bad Request\nres.status(400).json({\n  error: "Specific error message",\n});\n\n// 401 Unauthorized\nres.status(401).json({\n  error: "Authentication failed",\n});\n\n// 500 Server Error\nres.status(500).json({\n  error: "Internal server error",\n});\n'})}),"\n",(0,i.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"CORS errors"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Check ",(0,i.jsx)(n.code,{children:"FRONTEND_URL"})," in ",(0,i.jsx)(n.code,{children:".env"})]}),"\n",(0,i.jsx)(n.li,{children:"Ensure credentials are enabled"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Auth errors"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Verify Supabase keys"}),"\n",(0,i.jsx)(n.li,{children:"Check cookie settings"}),"\n",(0,i.jsx)(n.li,{children:"Validate token format"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Database errors"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Confirm Supabase connection"}),"\n",(0,i.jsx)(n.li,{children:"Check table permissions"}),"\n",(0,i.jsx)(n.li,{children:"Validate query syntax"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"deployment",children:"Deployment"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Set production environment variables"}),"\n",(0,i.jsx)(n.li,{children:"Build the application:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run build\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Start production server:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm start\n"})}),"\n",(0,i.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://expressjs.com/",children:"Express.js Documentation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://supabase.com/docs",children:"Supabase Documentation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/disc-template/backend",children:"Project Repository"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>a});var s=r(6540);const i={},l=s.createContext(i);function t(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);